{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from\"axios\";var BASE_URL=\"http://localhost:3001\";var A2Api=/*#__PURE__*/function(){function A2Api(){_classCallCheck(this,A2Api);}_createClass(A2Api,null,[{key:\"request\",value:function(){var _request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(endpoint){var data,method,url,headers,params,message,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_args.length>1&&_args[1]!==undefined?_args[1]:{};method=_args.length>2&&_args[2]!==undefined?_args[2]:\"get\";// console.debug(\"API Call:\", endpoint, data, method);\nurl=\"\".concat(BASE_URL,\"/\").concat(endpoint);headers={Authorization:\"Bearer \".concat(A2Api.token)};params=method===\"get\"?data:{};_context.prev=5;_context.next=8;return axios({url:url,method:method,data:data,params:params,headers:headers});case 8:return _context.abrupt(\"return\",_context.sent.data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);console.error(\"API Error:\",_context.t0.response);message=_context.t0.response.data.error.message;throw Array.isArray(message)?message:[message];case 16:case\"end\":return _context.stop();}}},_callee,null,[[5,11]]);}));function request(_x){return _request.apply(this,arguments);}return request;}()////////////////////////////////////////////////////////////////////////////////-posts\n//-add delete post\n},{key:\"getPosts\",value:function(){var _getPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(params){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.request(\"post/\",params);case 2:res=_context2.sent;return _context2.abrupt(\"return\",res.posts);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function getPosts(_x2){return _getPosts.apply(this,arguments);}return getPosts;}()},{key:\"createPost\",value:function(){var _createPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(params){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.request('post/',params,'post');case 2:res=_context3.sent;return _context3.abrupt(\"return\",res.posts);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function createPost(_x3){return _createPost.apply(this,arguments);}return createPost;}()////////////////////////////////////////////////////////////////////////////////-anons\n},{key:\"getAnon\",value:function(){var _getAnon=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(handle){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.request(\"anon/\".concat(handle));case 2:res=_context4.sent;return _context4.abrupt(\"return\",res.anon);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function getAnon(_x4){return _getAnon.apply(this,arguments);}return getAnon;}()},{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.request(\"auth/token\",data,\"post\");case 2:res=_context5.sent;return _context5.abrupt(\"return\",res.token);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function login(_x5){return _login.apply(this,arguments);}return login;}()},{key:\"register\",value:function(){var _register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.request(\"auth/register\",data,\"post\");case 2:res=_context6.sent;return _context6.abrupt(\"return\",res.token);case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function register(_x6){return _register.apply(this,arguments);}return register;}()},{key:\"saveProfile\",value:function(){var _saveProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(handle,data){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.request(\"anon/\".concat(handle),data,\"patch\");case 2:res=_context7.sent;return _context7.abrupt(\"return\",res.anon);case 4:case\"end\":return _context7.stop();}}},_callee7,this);}));function saveProfile(_x7,_x8){return _saveProfile.apply(this,arguments);}return saveProfile;}()////////////////////////////////////////////////////////////////////////////////-tags\n},{key:\"getTags\",value:function(){var _getTags=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(tag){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.request(\"tag/\",{tag:tag});case 2:res=_context8.sent;return _context8.abrupt(\"return\",res);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function getTags(_x9){return _getTags.apply(this,arguments);}return getTags;}()},{key:\"createTag\",value:function(){var _createTag=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(tag){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.request('tag/',{tag:tag},'post');case 2:res=_context9.sent;case 3:case\"end\":return _context9.stop();}}},_callee9,this);}));function createTag(_x10){return _createTag.apply(this,arguments);}return createTag;}()// static async getCompanies(name) {\n//   let res = await this.request(\"companies\", { name });\n//   return res.companies;\n// }\n// static async getCompany(handle) {\n//   let res = await this.request(`companies/${handle}`);\n//   return res.company;\n// }\n// static async getJobs(title) {\n//   let res = await this.request(\"jobs\", { title });\n//   return res.jobs;\n// }\n// static async apply(handle, id) {\n//   await this.request(`anon/${handle}/jobs/${id}`, {}, \"post\");\n// }\n}]);return A2Api;}();export default A2Api;","map":{"version":3,"sources":["/Users/johnsaville/Desktop/frontend/src/api/a2api.js"],"names":["axios","BASE_URL","A2Api","endpoint","data","method","url","headers","Authorization","token","params","console","error","response","message","Array","isArray","request","res","posts","handle","anon","tag"],"mappings":"mmBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,uBAAjB,C,GAGMC,CAAAA,K,qMAEJ,iBAAqBC,QAArB,6KAA+BC,IAA/B,+CAAsC,EAAtC,CAA0CC,MAA1C,+CAAmD,KAAnD,CACE;AACMC,GAFR,WAEiBL,QAFjB,aAE6BE,QAF7B,EAGQI,OAHR,CAGkB,CAAEC,aAAa,kBAAYN,KAAK,CAACO,KAAlB,CAAf,CAHlB,CAIQC,MAJR,CAIkBL,MAAM,GAAK,KAAZ,CACTD,IADS,CAET,EANR,uCAQkBJ,CAAAA,KAAK,CAAC,CAAEM,GAAG,CAAHA,GAAF,CAAOD,MAAM,CAANA,MAAP,CAAeD,IAAI,CAAJA,IAAf,CAAqBM,MAAM,CAANA,MAArB,CAA6BH,OAAO,CAAPA,OAA7B,CAAD,CARvB,sDAQiEH,IARjE,4DAUIO,OAAO,CAACC,KAAR,CAAc,YAAd,CAA4B,YAAIC,QAAhC,EACIC,OAXR,CAWkB,YAAID,QAAJ,CAAaT,IAAb,CAAkBQ,KAAlB,CAAwBE,OAX1C,MAYUC,CAAAA,KAAK,CAACC,OAAN,CAAcF,OAAd,EAAyBA,OAAzB,CAAmC,CAACA,OAAD,CAZ7C,sE,iFAgBF;AACA;yGAEE,kBAAsBJ,MAAtB,qJACkB,MAAKO,OAAL,SAAqBP,MAArB,CADlB,QACMQ,GADN,iDAESA,GAAG,CAACC,KAFb,+D,kMAIA,kBAAwBT,MAAxB,qJACkB,MAAKO,OAAL,CAAa,OAAb,CAAqBP,MAArB,CAA4B,MAA5B,CADlB,QACMQ,GADN,iDAESA,GAAG,CAACC,KAFb,+D,2FAKF;uGAEE,kBAAqBC,MAArB,qJACkB,MAAKH,OAAL,gBAAqBG,MAArB,EADlB,QACMF,GADN,iDAESA,GAAG,CAACG,IAFb,+D,qLAIA,kBAAmBjB,IAAnB,qJACkB,MAAKa,OAAL,cAA2Bb,IAA3B,CAAiC,MAAjC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACT,KAFb,+D,qLAKA,kBAAsBL,IAAtB,qJACkB,MAAKa,OAAL,iBAA8Bb,IAA9B,CAAoC,MAApC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACT,KAFb,+D,oMAIA,kBAAyBW,MAAzB,CAAiChB,IAAjC,qJACkB,MAAKa,OAAL,gBAAqBG,MAArB,EAA+BhB,IAA/B,CAAqC,OAArC,CADlB,QACMc,GADN,iDAESA,GAAG,CAACG,IAFb,+D,kGAKD;uGAEC,kBAAqBC,GAArB,qJACkB,MAAKL,OAAL,QAAoB,CAACK,GAAG,CAAHA,GAAD,CAApB,CADlB,QACMJ,GADN,iDAESA,GAFT,+D,6LAKA,kBAAuBI,GAAvB,qJACkB,MAAKL,OAAL,CAAa,MAAb,CAAoB,CAACK,GAAG,CAAHA,GAAD,CAApB,CAA0B,MAA1B,CADlB,QACMJ,GADN,6E,yFAqBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;qBAIF,cAAehB,CAAAA,KAAf","sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"http://localhost:3001\";\n\n\nclass A2Api {\n  static token;\n  static async request(endpoint, data = {}, method = \"get\") {\n    // console.debug(\"API Call:\", endpoint, data, method);\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${A2Api.token}` };\n    const params = (method === \"get\")\n        ? data\n        : {};\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      let message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n////////////////////////////////////////////////////////////////////////////////-posts\n//-add delete post\n\n  static async getPosts(params){\n    let res = await this.request(`post/`,params);\n    return res.posts;\n  }\n  static async createPost(params){\n    let res = await this.request('post/',params,'post');\n    return res.posts;\n  }\n\n////////////////////////////////////////////////////////////////////////////////-anons\n\n  static async getAnon(handle) {\n    let res = await this.request(`anon/${handle}`);\n    return res.anon;\n  }\n  static async login(data) {\n    let res = await this.request(`auth/token`, data, \"post\");\n    return res.token;\n  }\n\n  static async register(data) {\n    let res = await this.request(`auth/register`, data, \"post\");\n    return res.token;\n  }\n  static async saveProfile(handle, data) {\n    let res = await this.request(`anon/${handle}`, data, \"patch\");\n    return res.anon;\n  }\n\n ////////////////////////////////////////////////////////////////////////////////-tags\n\n  static async getTags(tag){\n    let res = await this.request(`tag/`,{tag});\n    return res;\n  }\n\n  static async createTag(tag){\n    let res = await this.request('tag/',{tag},'post');\n  }\n\n \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  // static async getCompanies(name) {\n  //   let res = await this.request(\"companies\", { name });\n  //   return res.companies;\n  // }\n\n  // static async getCompany(handle) {\n  //   let res = await this.request(`companies/${handle}`);\n  //   return res.company;\n  // }\n\n  // static async getJobs(title) {\n  //   let res = await this.request(\"jobs\", { title });\n  //   return res.jobs;\n  // }\n\n  // static async apply(handle, id) {\n  //   await this.request(`anon/${handle}/jobs/${id}`, {}, \"post\");\n  // }\n}\n\n\nexport default A2Api;\n\n"]},"metadata":{},"sourceType":"module"}