{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnsaville/Desktop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import Alert from\"../common/Alert\";function randomAnon(){return\"Anonymous\".concat(Math.floor(Math.random()*999999));}function RegistrationForm(_ref){var register=_ref.register;var history=useHistory();var _useState=useState({handle:\"john\",password:\"password\",confirmPassword:\"password\",securityQuestion:\"password\",securityAnswer:\"password\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];console.debug(\"RegistrationForm\",\"register=\",typeof register,\"formData=\",formData,\"formErrors=\",formErrors);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.next=3;return register(formData);case 3:result=_context.sent;if(result.success){history.push(\"/\");}else{setFormErrors(result.errors);}case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});}return/*#__PURE__*/React.createElement(\"div\",{className:\"RegistrationForm\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-3\"},\"Create Account\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Handle\"),/*#__PURE__*/React.createElement(\"input\",{name:\"handle\",className:\"form-control\",value:formData.handle,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",value:formData.password,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Confirm Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"confirmPassword\",className:\"form-control\",value:formData.confirmPassword,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Security Question ( for account recovery )\"),/*#__PURE__*/React.createElement(\"input\",{name:\"securityQuestion\",className:\"form-control\",value:formData.securityQuestion,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Answer\"),/*#__PURE__*/React.createElement(\"input\",{name:\"securityAnswer\",className:\"form-control\",value:formData.securityAnswer,onChange:handleChange})),formErrors.length?/*#__PURE__*/React.createElement(Alert,{type:\"danger\",messages:formErrors}):null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary float-right\",onSubmit:handleSubmit},\"Submit\"))))));}export default RegistrationForm;","map":{"version":3,"sources":["/Users/johnsaville/Desktop/frontend/src/auth/RegistrationForm.js"],"names":["React","useState","useHistory","Alert","randomAnon","Math","floor","random","RegistrationForm","register","history","handle","password","confirmPassword","securityQuestion","securityAnswer","formData","setFormData","formErrors","setFormErrors","console","debug","handleSubmit","evt","preventDefault","result","success","push","errors","handleChange","target","name","value","data","length"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"../common/Alert\";\n\nfunction randomAnon(){\n  return `Anonymous${Math.floor(Math.random() * 999999)}`;\n}\n\nfunction RegistrationForm({ register }) {\n  const history = useHistory();\n  const [formData, setFormData] = useState({\n    handle: \"john\",\n    password: \"password\",\n    confirmPassword:\"password\",\n    securityQuestion:\"password\",\n    securityAnswer:\"password\",\n  });\n  const [formErrors, setFormErrors] = useState([]);\n\n  console.debug(\n      \"RegistrationForm\",\n      \"register=\", typeof register,\n      \"formData=\", formData,\n      \"formErrors=\", formErrors,\n  );\n\n  async function handleSubmit(evt) {\n    evt.preventDefault();\n    let result = await register(formData);\n    if (result.success) {\n      history.push(\"/\");\n    } else {\n      setFormErrors(result.errors);\n    }\n  }\n  \n\n  function handleChange(evt) {\n    const { name, value } = evt.target;\n    setFormData(data => ({ ...data, [name]: value }));\n  }\n\n  return (\n      <div className=\"RegistrationForm\">\n        <div className=\"container col-md-6 offset-md-3 col-lg-4 offset-lg-4\">\n          <h2 className=\"mb-3\">Create Account</h2>\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                  <label>Handle</label>\n                  <input\n                      name=\"handle\"\n                      className=\"form-control\"\n                      value={formData.handle}\n                      onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Password</label>\n                  <input\n                      type=\"password\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      value={formData.password}\n                      onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Confirm Password</label>\n                  <input\n                      type=\"password\"\n                      name=\"confirmPassword\"\n                      className=\"form-control\"\n                      value={formData.confirmPassword}\n                      onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Security Question ( for account recovery )</label>\n                  <input\n                      name=\"securityQuestion\"\n                      className=\"form-control\"\n                      value={formData.securityQuestion}\n                      onChange={handleChange}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label>Answer</label>\n                  <input\n                      name=\"securityAnswer\"\n                      className=\"form-control\"\n                      value={formData.securityAnswer}\n                      onChange={handleChange}\n                  />\n                </div>\n\n                {formErrors.length\n                    ? <Alert type=\"danger\" messages={formErrors} />\n                    : null\n                }\n\n                <button\n                    type=\"submit\"\n                    className=\"btn btn-primary float-right\"\n                    onSubmit={handleSubmit}\n                >\n                  Submit\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n  );\n}\n\nexport default RegistrationForm;"]},"metadata":{},"sourceType":"module"}